<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="circular-timer" data-date="2021-06-01T00:00:00">
		<div class="circular-timer__item days">
			<span class="circular-timer-data">
				<span class="value">0</span>
				<span class="text">days</span>
			</span>
			<svg width="124" height="124" viewBox="0 0 124 124" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M124 62C124 96.2417 96.2417 124 62 124C27.7583 124 0 96.2417 0 62C0 27.7583 27.7583 0 62 0C96.2417 0 124 27.7583 124 62ZM6.2 62C6.2 92.8175 31.1825 117.8 62 117.8C92.8175 117.8 117.8 92.8175 117.8 62C117.8 31.1825 92.8175 6.2 62 6.2C31.1825 6.2 6.2 31.1825 6.2 62Z" fill="#F2F5FC"/>
				<circle class="progress" cx="62" cy="62" r="59" stroke-width="6" stroke="url(#paint0_linear)"/>
				<defs>
					<linearGradient id="paint0_linear" x1="0" y1="124" x2="-5.74745e-06" y2="-7.63077" gradientUnits="userSpaceOnUse">
						<stop stop-color="#FF1C8C"/>
						<stop offset="1" stop-color="#FFE6D4"/>
					</linearGradient>
				</defs>
			</svg>
		</div>
		<div class="circular-timer__item hours">
			<span class="circular-timer-data">
				<span class="value">0</span>
				<span class="text">hours</span>
			</span>
			<svg width="124" height="124" viewBox="0 0 124 124" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M124 62C124 96.2417 96.2417 124 62 124C27.7583 124 0 96.2417 0 62C0 27.7583 27.7583 0 62 0C96.2417 0 124 27.7583 124 62ZM6.2 62C6.2 92.8175 31.1825 117.8 62 117.8C92.8175 117.8 117.8 92.8175 117.8 62C117.8 31.1825 92.8175 6.2 62 6.2C31.1825 6.2 6.2 31.1825 6.2 62Z" fill="#F2F5FC"/>
				<circle class="progress" cx="62" cy="62" r="59" stroke-width="6" stroke="url(#paint0_linear)"/>
				<defs>
					<linearGradient id="paint0_linear" x1="0" y1="124" x2="-5.74745e-06" y2="-7.63077" gradientUnits="userSpaceOnUse">
						<stop stop-color="#FF1C8C"/>
						<stop offset="1" stop-color="#FFE6D4"/>
					</linearGradient>
				</defs>
			</svg>
		</div>
		<div class="circular-timer__item minutes">
			<span class="circular-timer-data">
				<span class="value">0</span>
				<span class="text">minutes</span>
			</span>
			<svg width="124" height="124" viewBox="0 0 124 124" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M124 62C124 96.2417 96.2417 124 62 124C27.7583 124 0 96.2417 0 62C0 27.7583 27.7583 0 62 0C96.2417 0 124 27.7583 124 62ZM6.2 62C6.2 92.8175 31.1825 117.8 62 117.8C92.8175 117.8 117.8 92.8175 117.8 62C117.8 31.1825 92.8175 6.2 62 6.2C31.1825 6.2 6.2 31.1825 6.2 62Z" fill="#F2F5FC"/>
				<circle class="progress" cx="62" cy="62" r="59" stroke-width="6" stroke="url(#paint0_linear)"/>
				<defs>
					<linearGradient id="paint0_linear" x1="0" y1="124" x2="-5.74745e-06" y2="-7.63077" gradientUnits="userSpaceOnUse">
						<stop stop-color="#FF1C8C"/>
						<stop offset="1" stop-color="#FFE6D4"/>
					</linearGradient>
				</defs>
			</svg>
		</div>
		<div class="circular-timer__item seconds">
			<span class="circular-timer-data">
				<span class="value">0</span>
				<span class="text">seconds</span>
			</span>
			<svg width="124" height="124" viewBox="0 0 124 124" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M124 62C124 96.2417 96.2417 124 62 124C27.7583 124 0 96.2417 0 62C0 27.7583 27.7583 0 62 0C96.2417 0 124 27.7583 124 62ZM6.2 62C6.2 92.8175 31.1825 117.8 62 117.8C92.8175 117.8 117.8 92.8175 117.8 62C117.8 31.1825 92.8175 6.2 62 6.2C31.1825 6.2 6.2 31.1825 6.2 62Z" fill="#F2F5FC"/>
				<circle class="progress" cx="62" cy="62" r="59" stroke-width="6" stroke="url(#paint0_linear)"/>
				<defs>
					<linearGradient id="paint0_linear" x1="0" y1="124" x2="-5.74745e-06" y2="-7.63077" gradientUnits="userSpaceOnUse">
						<stop stop-color="#FF1C8C"/>
						<stop offset="1" stop-color="#FFE6D4"/>
					</linearGradient>
				</defs>
			</svg>
		</div>
	</div>

	<script>
		var CircularTimer = function(el) {

			var self = this;

			self.SECONDS_MULTIPLIER = 10;
			self.BASE_LENGTH = {
				"days": 365,
				"hours": 24,
				"minutes": 60,
				"seconds": 60
			};

			self.daysCircle         = el.querySelector('.circular-timer__item.days');
			self.hoursCircle        = el.querySelector('.circular-timer__item.hours');
			self.minutesCircle      = el.querySelector('.circular-timer__item.minutes');
			self.secondsCircle      = el.querySelector('.circular-timer__item.seconds');
			self.RADIUS             = +self.daysCircle.querySelector('circle').getAttribute('r');
			self.CIRCUMFERENCE      = 2 * Math.PI * self.RADIUS;
			self.countDownDate      = new Date(el.getAttribute('data-date')).getTime();

			self.distance           = self.countDownDate - new Date().getTime();


			self.setDashArray = function () {
				el.querySelectorAll('circle.progress').forEach(function(el){
					el.style.strokeDasharray = self.CIRCUMFERENCE
				});
			}

			self.getDistanceData = function(seconds_multiplier) {
				return {
					"days": Math.floor(self.distance / (1000 * 60 * 60 * 24)),
					"hours": Math.floor((self.distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
					"minutes": Math.floor((self.distance % (1000 * 60 * 60)) / (1000 * 60)),
					"seconds": (self.distance % (1000 * 60) / 1000) * self.SECONDS_MULTIPLIER
				}
			}

			self.drawProgress  = function (element, type, length, multiply) {
				var multi = multiply ? multiply : 1;
				var progress = length / ( self.BASE_LENGTH[type] * multi );
				var dashoffset = self.CIRCUMFERENCE * (1 - progress);

				element.querySelector('.circular-timer__item-value').textContent = Math.floor(length / multi);
				element.querySelector('.progress').style.strokeDashoffset = dashoffset;
			};


			self.countdown = function(){
				var computedData = self.getDistanceData();

				if ( computedData.seconds <= 0 && computedData.minutes <= 0 && computedData.hours <= 0 && computedData.days <= 0 )
				{
					self.stopCountdown();
					self.setZero();
					return;
				}

				self.drawProgress(self.secondsCircle, "seconds", computedData.seconds, self.SECONDS_MULTIPLIER);
				self.drawProgress(self.minutesCircle, "minutes", computedData.minutes);
				self.drawProgress(self.hoursCircle, "hours", computedData.hours);
				self.drawProgress(self.daysCircle, "days", computedData.days);

				self.distance -= (1000 / self.SECONDS_MULTIPLIER);
			};


			self.stopCountdown = function(){
				clearInterval(self.startCountdown);
			};

			self.setZero = function () {
				self.drawProgress(self.secondsCircle, "seconds", 0);
				self.drawProgress(self.minutesCircle, "minutes", 0);
				self.drawProgress(self.hoursCircle, "hours", 0);
				self.drawProgress(self.daysCircle, "days", 0);
			}

			self.setDashArray();
			self.startCountdown = setInterval(self.countdown, 1000 / self.SECONDS_MULTIPLIER);

			};

			var introTimer = new CircularTimer( document.querySelector('.circular-timer') );

	</script>
</body>
</html>
